<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

    <link rel="stylesheet" th:href="@{/styles.css}" />

</head>
<body>
    <div>

        <div  class="hd col-md-12">

                <div class="pd">
                    <a th:href="@{__${T(com.aboguslawski.blog.util.Mappings).HOME}__}">Home</a>

                    <span>
<!--                        /my_posts-->
                        <a th:if="${userService.currentUserName() != 'anonymousUser'}"
                           th:href="@{__${T(com.aboguslawski.blog.util.Mappings).USER}__(email=${userService.currentUserName()})}"
                           th:text="${userService.currentUserName()}">my posts</a>
                    </span>

                    <span>
<!--                        /new_post-->
                        <a th:if="${userService.currentUserName() != 'anonymousUser'}"
                           th:href="@{__${T(com.aboguslawski.blog.util.Mappings).NEW_POST}__}">new post</a>
                    </span>

                    <span>
<!--                        /logout-->
                        <a th:if="${userService.currentUserName() != 'anonymousUser'}"
                           th:href="@{__${T(com.aboguslawski.blog.util.Mappings).LOGOUT}__}">logout</a>
                    </span>

                    <span>
<!--                        /login-->
                        <a th:if="${userService.currentUserName() == 'anonymousUser'}"
                           th:href="@{__${T(com.aboguslawski.blog.util.Mappings).LOGIN}__}">log in</a>
<!--                        /register-->
                        <a th:if="${userService.currentUserName() == 'anonymousUser'}"
                           th:href="@{__${T(com.aboguslawski.blog.util.Mappings).REGISTER}__}">sign up</a>
                    </span>
            </div>
        </div>

            <!--<div class="col-md-8">
                <form action="#" th:action="@{/search}" th:object="${oldPost}" method="oldPost">
                    <div class="pd">
                        <input type="hidden" th:field="*{id}"/>
                        <a>User: <input class="box2" type="text" th:field="*{usr}"/> </a>
                        <a>Content: <input class="box2" type="text" th:field="*{content}"/> </a>
                        <a><input class="box2" type="submit" value="search"/> </a>
                    </div>
                </form>
            </div>-->

            <!--<div class="col-md-2">
                <form action="#" th:action="@{/}" method="oldPost">
                    <div class="pd">
                        <a><input class="box2" type="submit" value="sort"/> </a>
                    </div>
                </form>
            </div>
        </div>-->


        <ul th:each="post : ${postService.allPosts()}">
            <div class="row">
                <div class="col-md-2">
                    <div class="box" align="left">
                        <ul th:each="user : ${post.getUsers()}">
                            <a th:href="@{__${T(com.aboguslawski.blog.util.Mappings).USER}__(email=${user.email})}"
                               th:text="${user.email}"></a>
                        </ul>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="box">
                        <a th:text="${post.content}">content</a>
                    </div>
                </div>
                <div align="center" class="col-md-1">
                    <div class="box">
                        <a th:href="@{__${T(com.aboguslawski.blog.util.Mappings).POST}__(id=${post.id})}"
                           th:text="view">
                            view oldPost
                        </a>

                    </div>
                </div>
            </div>
        </ul>
    </div>

</body>
</html>